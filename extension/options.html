<!DOCTYPE html>
<html>
<head>
  <title>Download Router - Settings</title>
  <link rel="stylesheet" href="options.css">
  <script src="lib/icons.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="app-container">
      <div class="header-content">
        <div class="app-icon" id="options-app-icon"></div>
        <div class="app-title">
          <h1>Download Router Settings</h1>
          <p class="app-subtitle">Configure your download routing rules</p>
        </div>
      </div>
      <nav class="tab-navigation">
        <button class="tab-btn active" data-tab="rules">Rules</button>
        <button class="tab-btn" data-tab="filetypes">File Types</button>
        <button class="tab-btn" data-tab="settings">Settings</button>
      </nav>
    </div>
  </header>

  <div class="app-wrapper">
    <main class="app-main">
      <!-- Rules Tab -->
      <div class="tab-content active" id="rules-tab">
        <div class="section-header">
          <h2>Download Rules</h2>
          <p class="section-description">Create rules to automatically route downloads to specific folders</p>
        </div>
        
        <div class="rules-container" id="rules-container">
          <div class="empty-state" id="rules-empty">
            <div class="empty-icon" id="rules-empty-icon"></div>
            <h3>No rules configured</h3>
            <p>Create your first rule to start organizing downloads automatically</p>
          </div>
        </div>
        
        <div class="section-actions">
          <button class="btn primary" id="add-rule">
            <span class="btn-icon" id="add-rule-icon"></span>
            Add Rule
          </button>
        </div>
      </div>

      <!-- File Types Tab -->
      <div class="tab-content" id="filetypes-tab">
        <div class="section-header">
          <h2>File Types</h2>
          <p class="section-description">Organize file types into groups for easier management</p>
        </div>
        
        <div class="groups-container" id="groups-container">
          <div class="empty-state" id="groups-empty">
            <div class="empty-icon" id="groups-empty-icon"></div>
            <h3>No file types configured</h3>
            <p>Create file types to organize similar file extensions together</p>
          </div>
        </div>
        
        <div class="section-actions">
          <button class="btn primary" id="add-group">
            <span class="btn-icon" id="add-group-icon"></span>
            Add File Type
          </button>
          <button class="btn secondary" id="load-defaults">
            <span class="btn-icon" id="load-defaults-icon"></span>
            Load Default File Types
          </button>
        </div>
      </div>

      <!-- Settings Tab -->
      <div class="tab-content" id="settings-tab">
        <div class="section-header">
          <h2>General Settings</h2>
          <p class="section-description">Configure how Download Router behaves</p>
        </div>
        
        <div class="settings-grid">
          <div class="setting-card">
            <div class="setting-header">
              <h3>Confirmation Overlay</h3>
              <label class="toggle-switch">
                <input type="checkbox" id="confirmation-enabled" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <p class="setting-description">Show a confirmation overlay before saving downloads</p>
            
            <div class="setting-option" id="timeout-setting">
              <label for="confirmation-timeout">Auto-save timeout (seconds):</label>
              <input type="range" id="confirmation-timeout" min="1" max="30" value="5" class="range-input">
              <span class="range-value" id="timeout-value">5s</span>
            </div>
          </div>

          <div class="setting-card">
            <div class="setting-header">
              <h3>Default Folder</h3>
            </div>
            <p class="setting-description">Where to save downloads when no rules match</p>
            
            <div class="setting-input">
              <input type="text" id="default-folder" value="Downloads" class="form-input" placeholder="Downloads">
              <button id="browse-default-folder" class="btn secondary">Browse</button>
            </div>
          </div>

          <div class="setting-card">
            <div class="setting-header">
              <h3>Conflict Resolution</h3>
            </div>
            <p class="setting-description">When multiple rules have the same priority:</p>
            
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="conflict-resolution" value="auto" checked>
                <span class="radio-custom"></span>
                <div class="radio-content">
                  <strong>Auto-resolve</strong>
                  <small>Use highest priority rule automatically</small>
                </div>
              </label>
              <label class="radio-option">
                <input type="radio" name="conflict-resolution" value="ask">
                <span class="radio-custom"></span>
                <div class="radio-content">
                  <strong>Ask Every Time</strong>
                  <small>Show conflict dialog in overlay</small>
                </div>
              </label>
            </div>
          </div>
        </div>
      </div>

    </main>
  </div>

  <footer class="app-footer">
    <div class="app-container">
      <div class="footer-actions">
          <button class="btn secondary" id="reset-options">
            <span class="btn-icon" id="reset-options-icon"></span>
            Reset to Defaults
          </button>
      </div>
      <div class="status-message" id="status"></div>
    </div>
  </footer>

  <!-- Modals -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="folder-picker-modal">
      <div class="modal-header">
        <h3>Choose Folder</h3>
        <button class="modal-close" id="close-modal">X</button>
      </div>
      <div class="modal-body">
        <div class="folder-tree" id="folder-tree"></div>
      </div>
      <div class="modal-footer">
        <button class="btn secondary" id="modal-cancel">Cancel</button>
        <button class="btn primary" id="modal-select">Select Folder</button>
      </div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>
